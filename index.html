<!doctype html>

<html lang="fa" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>گاوصندوق پیشرفته</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;600;700&display=swap');

- {
  box-sizing: border-box;
  }

body {
margin: 0;
height: 100vh;
display: flex;
justify-content: center;
align-items: center;
background: linear-gradient(135deg, #0c0c0c 0%, #1a1a2e 50%, #16213e 100%);
font-family: “Vazirmatn”, sans-serif;
color: #fff;
overflow: hidden;
}

/* افکت ذرات پس‌زمینه */
.particles {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
pointer-events: none;
z-index: -1;
}

.particle {
position: absolute;
width: 2px;
height: 2px;
background: rgba(255, 255, 255, 0.3);
border-radius: 50%;
animation: float 6s ease-in-out infinite;
}

@keyframes float {
0%, 100% { transform: translateY(0) rotate(0deg); opacity: 0; }
50% { opacity: 1; }
}

.safe {
position: relative;
width: 450px;
filter: drop-shadow(0 20px 40px rgba(0, 0, 0, 0.5));
transition: transform 0.3s ease;
}

.safe:hover {
transform: scale(1.02);
}

.safe img {
width: 100%;
display: block;
border-radius: 15px;
}

/* ناحیه تعاملی با افکت‌های بهتر */
.hotspot {
position: absolute;
top: 56%;
left: 50%;
transform: translate(-50%, -50%);
width: 140px;
height: 140px;
border-radius: 50%;
cursor: pointer;
display: flex;
align-items: center;
justify-content: center;
background: radial-gradient(circle, rgba(0, 255, 255, 0.1) 0%, transparent 70%);
border: 2px solid transparent;
transition: all 0.3s ease;
animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
0%, 100% { box-shadow: 0 0 20px rgba(0, 255, 255, 0.3); }
50% { box-shadow: 0 0 40px rgba(0, 255, 255, 0.6); }
}

.hotspot:hover {
background: radial-gradient(circle, rgba(0, 255, 255, 0.2) 0%, transparent 70%);
border-color: rgba(0, 255, 255, 0.5);
transform: translate(-50%, -50%) scale(1.1);
}

.hotspot::after {
content: “🔒”;
font-size: 42px;
text-shadow: 0 0 15px rgba(0, 255, 255, 0.8);
animation: glow 1.5s ease-in-out infinite alternate;
}

@keyframes glow {
from { text-shadow: 0 0 15px rgba(0, 255, 255, 0.8); }
to { text-shadow: 0 0 25px rgba(0, 255, 255, 1), 0 0 35px rgba(0, 255, 255, 0.6); }
}

/* صفحه رمز با انیمیشن‌های پیشرفته */
.overlay {
position: fixed;
inset: 0;
background: rgba(0, 0, 0, 0.9);
backdrop-filter: blur(10px);
display: none;
justify-content: center;
align-items: center;
opacity: 0;
transition: opacity 0.3s ease;
}

.overlay.show {
display: flex;
animation: fadeIn 0.3s ease forwards;
}

@keyframes fadeIn {
to { opacity: 1; }
}

.panel {
background: linear-gradient(145deg, #2a2a3a 0%, #1e1e2e 100%);
padding: 30px;
border-radius: 20px;
text-align: center;
width: 320px;
box-shadow:
0 20px 60px rgba(0, 0, 0, 0.7),
inset 0 1px 0 rgba(255, 255, 255, 0.1);
border: 1px solid rgba(255, 255, 255, 0.1);
transform: scale(0.8);
animation: popIn 0.4s ease-out forwards;
}

@keyframes popIn {
to { transform: scale(1); }
}

.panel h3 {
margin: 0 0 20px;
font-weight: 600;
font-size: 18px;
color: #00ffff;
text-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
}

.dots {
display: flex;
gap: 15px;
justify-content: center;
margin: 20px 0;
}

.dot {
width: 18px;
height: 18px;
border-radius: 50%;
background: #444;
border: 2px solid #666;
transition: all 0.3s ease;
position: relative;
overflow: hidden;
}

.dot.filled {
background: linear-gradient(45deg, #00ff88, #00ccff);
border-color: #00ffff;
box-shadow:
0 0 15px rgba(0, 255, 255, 0.5),
inset 0 2px 4px rgba(255, 255, 255, 0.3);
animation: fillDot 0.3s ease-out;
}

@keyframes fillDot {
0% { transform: scale(0); }
50% { transform: scale(1.2); }
100% { transform: scale(1); }
}

.keys {
display: grid;
grid-template-columns: repeat(3, 1fr);
gap: 12px;
margin-top: 25px;
}

.key {
background: linear-gradient(145deg, #3a3a4a, #2a2a3a);
border: none;
border-radius: 12px;
color: #fff;
font-size: 20px;
font-weight: 600;
padding: 18px;
cursor: pointer;
transition: all 0.2s ease;
box-shadow:
0 4px 15px rgba(0, 0, 0, 0.3),
inset 0 1px 0 rgba(255, 255, 255, 0.1);
  position: relative;
overflow: hidden;
}

.key::before {
content: ‘’;
position: absolute;
top: 0;
left: -100%;
width: 100%;
height: 100%;
background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
transition: left 0.5s ease;
}

.key:hover {
background: linear-gradient(145deg, #4a4a5a, #3a3a4a);
box-shadow:
0 6px 20px rgba(0, 255, 255, 0.2),
inset 0 1px 0 rgba(255, 255, 255, 0.2);
transform: translateY(-2px);
color: #00ffff;
}

.key:hover::before {
left: 100%;
}

.key:active {
transform: translateY(0);
box-shadow:
0 2px 10px rgba(0, 0, 0, 0.3),
inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.key.pressed {
animation: keyPress 0.1s ease-out;
}

@keyframes keyPress {
0% { transform: scale(1); }
50% { transform: scale(0.95); }
100% { transform: scale(1); }
}

.message {
margin-top: 20px;
font-weight: 600;
font-size: 16px;
color: #00ff88;
text-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
display: none;
animation: messageGlow 0.5s ease-out;
}

@keyframes messageGlow {
0% { opacity: 0; transform: translateY(10px); }
100% { opacity: 1; transform: translateY(0); }
}

.error {
color: #ff4757 !important;
text-shadow: 0 0 10px rgba(255, 71, 87, 0.5) !important;
animation: shake 0.5s ease-in-out !important;
}

@keyframes shake {
0%, 100% { transform: translateX(0); }
25% { transform: translateX(-5px); }
75% { transform: translateX(5px); }
}

.success-animation {
animation: success 1s ease-out;
}

@keyframes success {
0% { transform: scale(1); }
50% { transform: scale(1.05); }
100% { transform: scale(1); }
}

/* افکت‌های صوتی بصری */
.sound-wave {
position: absolute;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
width: 100px;
height: 100px;
border: 2px solid rgba(0, 255, 255, 0.6);
border-radius: 50%;
animation: soundWave 0.6s ease-out;
pointer-events: none;
}

@keyframes soundWave {
0% {
width: 0;
height: 0;
opacity: 1;
}
100% {
width: 200px;
height: 200px;
opacity: 0;
}
}

.attempts {
margin-top: 15px;
font-size: 14px;
color: #888;
}

.attempts.warning {
color: #ff6b35;
animation: warning 0.3s ease-in-out;
}

@keyframes warning {
0%, 100% { transform: scale(1); }
50% { transform: scale(1.05); }
}

/* ریسپانسیو */
@media (max-width: 480px) {
.safe { width: 350px; }
.panel { width: 280px; padding: 20px; }
.hotspot { width: 120px; height: 120px; }
}
</style>

</head>
<body>
  <!-- ذرات پس‌زمینه -->
  <div class="particles" id="particles"></div>

  <div class="safe">
    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 400'%3E%3Cdefs%3E%3ClinearGradient id='safeGrad' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23444;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23222;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='400' height='400' fill='url(%23safeGrad)' rx='20'/%3E%3Ccircle cx='200' cy='220' r='80' fill='%23333' stroke='%23555' stroke-width='4'/%3E%3Ccircle cx='200' cy='220' r='60' fill='%23222' stroke='%23444' stroke-width='2'/%3E%3Ctext x='200' y='100' text-anchor='middle' fill='%23666' font-family='Arial' font-size='24' font-weight='bold'%3ESAFE%3C/text%3E%3C/svg%3E" alt="گاوصندوق">
    <div class="hotspot" id="hotspot"></div>
  </div>

  <!-- صفحه رمز -->

  <div class="overlay" id="overlay">
    <div class="panel">
      <h3>رمز ۴ رقمی را وارد کنید</h3>
      <div class="dots">
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
      </div>
      <div class="keys">
        <button class="key" data-k="1">1</button>
        <button class="key" data-k="2">2</button>
        <button class="key" data-k="3">3</button>
        <button class="key" data-k="4">4</button>
        <button class="key" data-k="5">5</button>
        <button class="key" data-k="6">6</button>
        <button class="key" data-k="7">7</button>
        <button class="key" data-k="8">8</button>
        <button class="key" data-k="9">9</button>
        <div></div>
        <button class="key" data-k="0">0</button>
        خواهری, [9/8/2025 1:47 PM]
<button class="key" id="clear">⌫</button>
      </div>
      <div class="attempts" id="attempts">تلاش‌های باقی‌مانده: <span id="remainingAttempts">3</span></div>
      <div class="message" id="msg">🎉 گاوصندوق باز شد! پاکت داخل آن را بردارید</div>
    </div>
  </div>

<script>
class AdvancedSafe {
  constructor() {
    this.CORRECT = "1357";
    this.input = "";
    this.attempts = 3;
    this.maxAttempts = 3;
    this.isLocked = false;
    
    this.overlay = document.getElementById("overlay");
    this.hotspot = document.getElementById("hotspot");
    this.dots = document.querySelectorAll(".dot");
    this.msg = document.getElementById("msg");
    this.attemptsEl = document.getElementById("attempts");
    this.remainingAttemptsEl = document.getElementById("remainingAttempts");
    
    this.init();
    this.createParticles();
  }

  init() {
    this.hotspot.addEventListener("mouseenter", () => this.openPanel());
    this.hotspot.addEventListener("click", () => this.openPanel());
    
    document.querySelectorAll(".key").forEach(key => {
      key.addEventListener("click", (e) => this.handleKeyPress(e));
      key.addEventListener("mousedown", () => key.classList.add("pressed"));
      key.addEventListener("mouseup", () => key.classList.remove("pressed"));
      key.addEventListener("mouseleave", () => key.classList.remove("pressed"));
    });
    
    this.overlay.addEventListener("click", (e) => {
      if (e.target === this.overlay) this.closePanel();
    });

    // کیبورد فیزیکی
    document.addEventListener("keydown", (e) => this.handlePhysicalKey(e));
  }

  createParticles() {
    const particles = document.getElementById("particles");
    for (let i = 0; i < 50; i++) {
      const particle = document.createElement("div");
      particle.className = "particle";
      particle.style.left = Math.random() * 100 + "%";
      particle.style.top = Math.random() * 100 + "%";
      particle.style.animationDelay = Math.random() * 6 + "s";
      particle.style.animationDuration = (Math.random() * 3 + 3) + "s";
      particles.appendChild(particle);
    }
  }

  createSoundWave(element) {
    const wave = document.createElement("div");
    wave.className = "sound-wave";
    element.appendChild(wave);
    setTimeout(() => wave.remove(), 600);
  }

  openPanel() {
    if (this.isLocked) return;
    this.overlay.classList.add("show");
    this.reset();
    this.createSoundWave(this.hotspot);
  }

  closePanel() {
    this.overlay.classList.remove("show");
  }

  handlePhysicalKey(e) {
    if (!this.overlay.classList.contains("show")) return;
    
    if (e.key >= "0" && e.key <= "9") {
      this.addDigit(e.key);
    } else if (e.key === "Backspace" || e.key === "Delete") {
      this.removeDigit();
    } else if (e.key === "Escape") {
      this.closePanel();
    }
  }

  handleKeyPress(e) {
    const key = e.target;
    
    if (key.id === "clear") {
      this.removeDigit();
      return;
    }
    
    if (this.input.length >= 4) return;
    
    const digit = key.dataset.k;
    this.addDigit(digit);
  }

  addDigit(digit) {
    if (this.input.length >= 4 || this.isLocked) return;
    
    this.input += digit;
    this.render();
    
    if (this.input.length === 4) {
      setTimeout(() => this.check(), 300);
    }
  }

  removeDigit() {
    if (this.isLocked) return;
    this.input = this.input.slice(0, -1);
    this.render();
  }

  render() {
    this.dots.forEach((dot, i) => {
      dot.classList.toggle("filled", i < this.input.length);
    });
  }

  reset() {
    this.input = "";
    this.render();
    this.msg.style.display = "none";
    this.msg.classList.remove("error");
    this.updateAttemptsDisplay();
  }

  updateAttemptsDisplay() {
    this.remainingAttemptsEl.textContent = this.attempts;
    if (this.attempts <= 1) {
      this.attemptsEl.classList.add("warning");
    } else {
      this.attemptsEl.classList.remove("warning");
    }
  }

  check() {
    if (this.input === this.CORRECT) {
      this.success();
    } else {
      this.failure();
    }
  }

  success() {
    this.msg.style.


display = "block";
    this.msg.classList.remove("error");
    this.msg.classList.add("success-animation");
    
    // افکت موفقیت
    this.dots.forEach((dot, i) => {
      setTimeout(() => {
        dot.style.background = "linear-gradient(45deg, #00ff88, #00ccff)";
        dot.style.boxShadow = "0 0 20px rgba(0, 255, 136, 0.8)";
      }, i * 100);
    });

    // بستن خودکار پس از ۳ ثانیه
    setTimeout(() => this.closePanel(), 3000);
  }

  failure() {
    this.attempts--;
    this.updateAttemptsDisplay();
    
    if (this.attempts <= 0) {
      this.lockSafe();
      return;
    }

    this.msg.textContent = رمز اشتباه! ${this.attempts} تلاش باقی‌مانده;
    this.msg.classList.add("error");
    this.msg.style.display = "block";
    
    // انیمیشن خطا
    this.dots.forEach(dot => {
      dot.style.background = "#ff4757";
      dot.style.borderColor = "#ff4757";
      dot.style.boxShadow = "0 0 15px rgba(255, 71, 87, 0.5)";
    });

    setTimeout(() => {
      this.input = "";
      this.render();
      this.msg.style.display = "none";
      this.msg.classList.remove("error");
    }, 2000);
  }

  lockSafe() {
    this.isLocked = true;
    this.msg.textContent = "🔒 گاوصندوق قفل شد! لطفاً ۳۰ ثانیه صبر کنید";
    this.msg.classList.add("error");
    this.msg.style.display = "block";
    
    this.hotspot.style.opacity = "0.3";
    this.hotspot.style.cursor = "not-allowed";
    
    let countdown = 30;
    const timer = setInterval(() => {
      countdown--;
      this.msg.textContent = 🔒 گاوصندوق قفل است! ${countdown} ثانیه باقی‌مانده;
      
      if (countdown <= 0) {
        clearInterval(timer);
        this.unlockSafe();
      }
    }, 1000);
  }

  unlockSafe() {
    this.isLocked = false;
    this.attempts = this.maxAttempts;
    this.hotspot.style.opacity = "1";
    this.hotspot.style.cursor = "pointer";
    this.reset();
    this.msg.textContent = "گاوصندوق آزاد شد! دوباره تلاش کنید";
    this.msg.classList.remove("error");
    this.msg.style.display = "block";
    
    setTimeout(() => {
      this.msg.style.display = "none";
    }, 2000);
  }
}

// شروع برنامه
document.addEventListener("DOMContentLoaded", () => {
  new AdvancedSafe();
});
</script>

</body>
</html>

خواهری, [9/8/2025 1:55 PM]
<!doctype html>

<html lang="fa" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>گاوصندوق پیشرفته</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;600;700&display=swap');

- {
  box-sizing: border-box;
  }

body {
margin: 0;
height: 100vh;
display: flex;
justify-content: center;
align-items: center;
background: linear-gradient(135deg, #0c0c0c 0%, #1a1a2e 50%, #16213e 100%);
font-family: “Vazirmatn”, sans-serif;
color: #fff;
overflow: hidden;
}

/* افکت ذرات پس‌زمینه */
.particles {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
pointer-events: none;
z-index: -1;
}

.particle {
position: absolute;
width: 2px;
height: 2px;
background: rgba(255, 255, 255, 0.3);
border-radius: 50%;
animation: float 6s ease-in-out infinite;
}

@keyframes float {
0%, 100% { transform: translateY(0) rotate(0deg); opacity: 0; }
50% { opacity: 1; }
}

.safe {
position: relative;
width: 450px;
filter: drop-shadow(0 20px 40px rgba(0, 0, 0, 0.5));
transition: transform 0.3s ease;
}

.safe:hover {
transform: scale(1.02);
}

.safe img {
width: 100%;
display: block;
border-radius: 15px;
}

/* ناحیه تعاملی با افکت‌های بهتر */
.hotspot {
position: absolute;
top: 56%;
left: 50%;
transform: translate(-50%, -50%);
width: 140px;
height: 140px;
border-radius: 50%;
cursor: pointer;
display: flex;
align-items: center;
justify-content: center;
background: radial-gradient(circle, rgba(0, 255, 255, 0.1) 0%, transparent 70%);
border: 2px solid transparent;
transition: all 0.3s ease;
animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
0%, 100% { box-shadow: 0 0 20px rgba(0, 255, 255, 0.3); }
50% { box-shadow: 0 0 40px rgba(0, 255, 255, 0.6); }
}

.hotspot:hover {
background: radial-gradient(circle, rgba(0, 255, 255, 0.2) 0%, transparent 70%);
border-color: rgba(0, 255, 255, 0.5);
transform: translate(-50%, -50%) scale(1.1);
}

.hotspot::after {
content: “🔒”;
font-size: 42px;
text-shadow: 0 0 15px rgba(0, 255, 255, 0.8);
animation: glow 1.5s ease-in-out infinite alternate;
}

@keyframes glow {
from { text-shadow: 0 0 15px rgba(0, 255, 255, 0.8); }
to { text-shadow: 0 0 25px rgba(0, 255, 255, 1), 0 0 35px rgba(0, 255, 255, 0.6); }
}

/* صفحه رمز با انیمیشن‌های پیشرفته */
.overlay {
position: fixed;
inset: 0;
background: rgba(0, 0, 0, 0.9);
backdrop-filter: blur(10px);
display: none;
justify-content: center;
align-items: center;
opacity: 0;
transition: opacity 0.3s ease;
}

.overlay.show {
display: flex;
animation: fadeIn 0.3s ease forwards;
}

@keyframes fadeIn {
to { opacity: 1; }
}

.panel {
background: linear-gradient(145deg, #2a2a3a 0%, #1e1e2e 100%);
padding: 30px;
border-radius: 20px;
text-align: center;
width: 320px;
box-shadow:
0 20px 60px rgba(0, 0, 0, 0.7),
inset 0 1px 0 rgba(255, 255, 255, 0.1);
border: 1px solid rgba(255, 255, 255, 0.1);
transform: scale(0.8);
animation: popIn 0.4s ease-out forwards;
}

@keyframes popIn {
to { transform: scale(1); }
}

.panel h3 {
margin: 0 0 20px;
font-weight: 600;
font-size: 18px;
color: #00ffff;
text-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
}

.dots {
display: flex;
gap: 15px;
justify-content: center;
margin: 20px 0;
}

.dot {
width: 18px;
height: 18px;
border-radius: 50%;
background: #444;
border: 2px solid #666;
transition: all 0.3s ease;
position: relative;
overflow: hidden;
}

.dot.filled {
background: linear-gradient(45deg, #00ff88, #00ccff);
border-color: #00ffff;
box-shadow:
0 0 15px rgba(0, 255, 255, 0.5),
inset 0 2px 4px rgba(255, 255, 255, 0.3);
animation: fillDot 0.3s ease-out;
}

@keyframes fillDot {
0% { transform: scale(0); }
50% { transform: scale(1.2); }
100% { transform: scale(1); }
}

.keys {
display: grid;
grid-template-columns: repeat(3, 1fr);
gap: 12px;
margin-top: 25px;
}

.key {
background: linear-gradient(145deg, #3a3a4a, #2a2a3a);
border: none;
border-radius: 12px;
color: #fff;
font-size: 20px;
font-weight: 600;
padding: 18px;
cursor: pointer;
transition: all 0.2s ease;
box-shadow:
0 4px 15px rgba(0, 0, 0, 0.3),
inset 0 1px 0 rgba(255, 255, 255, 0.1);


position: relative;
overflow: hidden;
}

.key::before {
content: ‘’;
position: absolute;
top: 0;
left: -100%;
width: 100%;
height: 100%;
background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
transition: left 0.5s ease;
}

.key:hover {
background: linear-gradient(145deg, #4a4a5a, #3a3a4a);
box-shadow:
0 6px 20px rgba(0, 255, 255, 0.2),
inset 0 1px 0 rgba(255, 255, 255, 0.2);
transform: translateY(-2px);
color: #00ffff;
}

.key:hover::before {
left: 100%;
}

.key:active {
transform: translateY(0);
box-shadow:
0 2px 10px rgba(0, 0, 0, 0.3),
inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.key.pressed {
animation: keyPress 0.1s ease-out;
}

@keyframes keyPress {
0% { transform: scale(1); }
50% { transform: scale(0.95); }
100% { transform: scale(1); }
}

.message {
margin-top: 20px;
font-weight: 600;
font-size: 16px;
color: #00ff88;
text-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
display: none;
animation: messageGlow 0.5s ease-out;
}

@keyframes messageGlow {
0% { opacity: 0; transform: translateY(10px); }
100% { opacity: 1; transform: translateY(0); }
}

.error {
color: #ff4757 !important;
text-shadow: 0 0 10px rgba(255, 71, 87, 0.5) !important;
animation: shake 0.5s ease-in-out !important;
}

@keyframes shake {
0%, 100% { transform: translateX(0); }
25% { transform: translateX(-5px); }
75% { transform: translateX(5px); }
}

.success-animation {
animation: success 1s ease-out;
}

@keyframes success {
0% { transform: scale(1); }
50% { transform: scale(1.05); }
100% { transform: scale(1); }
}

/* افکت‌های صوتی بصری */
.sound-wave {
position: absolute;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
width: 100px;
height: 100px;
border: 2px solid rgba(0, 255, 255, 0.6);
border-radius: 50%;
animation: soundWave 0.6s ease-out;
pointer-events: none;
}

@keyframes soundWave {
0% {
width: 0;
height: 0;
opacity: 1;
}
100% {
width: 200px;
height: 200px;
opacity: 0;
}
}

.attempts {
margin-top: 15px;
font-size: 14px;
color: #888;
}

.attempts.warning {
color: #ff6b35;
animation: warning 0.3s ease-in-out;
}

@keyframes warning {
0%, 100% { transform: scale(1); }
50% { transform: scale(1.05); }
}

/* ریسپانسیو */
@media (max-width: 480px) {
.safe { width: 350px; }
.panel { width: 280px; padding: 20px; }
.hotspot { width: 120px; height: 120px; }
}
</style>

</head>
<body>
  <!-- ذرات پس‌زمینه -->
  <div class="particles" id="particles"></div>

  <div class="safe">
    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 400'%3E%3Cdefs%3E%3ClinearGradient id='safeGrad' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23444;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23222;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='400' height='400' fill='url(%23safeGrad)' rx='20'/%3E%3Ccircle cx='200' cy='220' r='80' fill='%23333' stroke='%23555' stroke-width='4'/%3E%3Ccircle cx='200' cy='220' r='60' fill='%23222' stroke='%23444' stroke-width='2'/%3E%3Ctext x='200' y='100' text-anchor='middle' fill='%23666' font-family='Arial' font-size='24' font-weight='bold'%3ESAFE%3C/text%3E%3C/svg%3E" alt="گاوصندوق">
    <div class="hotspot" id="hotspot"></div>
  </div>

  <!-- صفحه رمز -->

  <div class="overlay" id="overlay">
    <div class="panel">
      <h3>رمز ۴ رقمی را وارد کنید</h3>
      <div class="dots">
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
      </div>
      <div class="keys">
        <button class="key" data-k="1">1</button>
        <button class="key" data-k="2">2</button>
        <button class="key" data-k="3">3</button>
        <button class="key" data-k="4">4</button>
        <button class="key" data-k="5">5</button>
        <button class="key" data-k="6">6</button>
        <button class="key" data-k="7">7</button>
        <button class="key" data-k="8">8</button>
        <button class="key" data-k="9">9</button>
        <div></div>
        <button class="key" data-k="0">0</button>

<button class="key" id="clear">⌫</button>
      </div>
      <div class="attempts" id="attempts">تلاش‌های باقی‌مانده: <span id="remainingAttempts">3</span></div>
      <div class="message" id="msg">🎉 گاوصندوق باز شد! پاکت داخل آن را بردارید</div>
    </div>
  </div>

<script>
class AdvancedSafe {
  constructor() {
    this.CORRECT = "1357";
    this.input = "";
    this.attempts = 3;
    this.maxAttempts = 3;
    this.isLocked = false;
    
    this.overlay = document.getElementById("overlay");
    this.hotspot = document.getElementById("hotspot");
    this.dots = document.querySelectorAll(".dot");
    this.msg = document.getElementById("msg");
    this.attemptsEl = document.getElementById("attempts");
    this.remainingAttemptsEl = document.getElementById("remainingAttempts");
    
    this.init();
    this.createParticles();
  }

  init() {
    this.hotspot.addEventListener("click", () => this.openPanel());
    
    document.querySelectorAll(".key").forEach(key => {
      key.addEventListener("click", (e) => this.handleKeyPress(e));
      key.addEventListener("mousedown", () => key.classList.add("pressed"));
      key.addEventListener("mouseup", () => key.classList.remove("pressed"));
      key.addEventListener("mouseleave", () => key.classList.remove("pressed"));
    });
    
    this.overlay.addEventListener("click", (e) => {
      if (e.target === this.overlay) this.closePanel();
    });

    // کیبورد فیزیکی
    document.addEventListener("keydown", (e) => this.handlePhysicalKey(e));
  }

  createParticles() {
    const particles = document.getElementById("particles");
    for (let i = 0; i < 50; i++) {
      const particle = document.createElement("div");
      particle.className = "particle";
      particle.style.left = Math.random() * 100 + "%";
      particle.style.top = Math.random() * 100 + "%";
      particle.style.animationDelay = Math.random() * 6 + "s";
      particle.style.animationDuration = (Math.random() * 3 + 3) + "s";
      particles.appendChild(particle);
    }
  }

  createSoundWave(element) {
    const wave = document.createElement("div");
    wave.className = "sound-wave";
    element.appendChild(wave);
    setTimeout(() => wave.remove(), 600);
  }

  openPanel() {
    if (this.isLocked) return;
    this.overlay.classList.add("show");
    this.reset();
    this.createSoundWave(this.hotspot);
  }

  closePanel() {
    this.overlay.classList.remove("show");
  }

  handlePhysicalKey(e) {
    if (!this.overlay.classList.contains("show")) return;
    
    if (e.key >= "0" && e.key <= "9") {
      this.addDigit(e.key);
    } else if (e.key === "Backspace" || e.key === "Delete") {
      this.removeDigit();
    } else if (e.key === "Escape") {
      this.closePanel();
    }
  }

  handleKeyPress(e) {
    const key = e.target;
    
    if (key.id === "clear") {
      this.removeDigit();
      return;
    }
    
    if (this.input.length >= 4) return;
    
    const digit = key.dataset.k;
    this.addDigit(digit);
  }

  addDigit(digit) {
    if (this.input.length >= 4 || this.isLocked) return;
    
    this.input += digit;
    this.render();
    
    if (this.input.length === 4) {
      setTimeout(() => this.check(), 300);
    }
  }

  removeDigit() {
    if (this.isLocked) return;
    this.input = this.input.slice(0, -1);
    this.render();
  }

  render() {
    this.dots.forEach((dot, i) => {
      dot.classList.toggle("filled", i < this.input.length);
    });
  }

  reset() {
    this.input = "";
    this.render();
    this.msg.style.display = "none";
    this.msg.classList.remove("error");
    this.updateAttemptsDisplay();
  }

  updateAttemptsDisplay() {
    this.remainingAttemptsEl.textContent = this.attempts;
    if (this.attempts <= 1) {
      this.attemptsEl.classList.add("warning");
    } else {
      this.attemptsEl.classList.remove("warning");
    }
  }

  check() {
    if (this.input === this.CORRECT) {
      this.success();
    } else {
      this.failure();
    }
  }

  success() {
    this.msg.style.display = "block";
    this.msg.classList.remove("error");
    this.msg.classList.

خواهری, [9/8/2025 1:55 PM]
add("success-animation");
    
    // افکت موفقیت
    this.dots.forEach((dot, i) => {
      setTimeout(() => {
        dot.style.background = "linear-gradient(45deg, #00ff88, #00ccff)";
        dot.style.boxShadow = "0 0 20px rgba(0, 255, 136, 0.8)";
      }, i * 100);
    });

    // بستن خودکار پس از ۳ ثانیه
    setTimeout(() => this.closePanel(), 3000);
  }

  failure() {
    this.attempts--;
    this.updateAttemptsDisplay();
    
    if (this.attempts <= 0) {
      this.lockSafe();
      return;
    }

    this.msg.textContent = رمز اشتباه! ${this.attempts} تلاش باقی‌مانده;
    this.msg.classList.add("error");
    this.msg.style.display = "block";
    
    // انیمیشن خطا
    this.dots.forEach(dot => {
      dot.style.background = "#ff4757";
      dot.style.borderColor = "#ff4757";
      dot.style.boxShadow = "0 0 15px rgba(255, 71, 87, 0.5)";
    });

    setTimeout(() => {
      this.input = "";
      this.render();
      this.msg.style.display = "none";
      this.msg.classList.remove("error");
    }, 2000);
  }

  lockSafe() {
    this.isLocked = true;
    this.msg.textContent = "🔒 گاوصندوق قفل شد! لطفاً ۳۰ ثانیه صبر کنید";
    this.msg.classList.add("error");
    this.msg.style.display = "block";
    
    this.hotspot.style.opacity = "0.3";
    this.hotspot.style.cursor = "not-allowed";
    
    let countdown = 30;
    const timer = setInterval(() => {
      countdown--;
      this.msg.textContent = 🔒 گاوصندوق قفل است! ${countdown} ثانیه باقی‌مانده;
      
      if (countdown <= 0) {
        clearInterval(timer);
        this.unlockSafe();
      }
    }, 1000);
  }

  unlockSafe() {
    this.isLocked = false;
    this.attempts = this.maxAttempts;
    this.hotspot.style.opacity = "1";
    this.hotspot.style.cursor = "pointer";
    this.reset();
    this.msg.textContent = "گاوصندوق آزاد شد! دوباره تلاش کنید";
    this.msg.classList.remove("error");
    this.msg.style.display = "block";
    
    setTimeout(() => {
      this.msg.style.display = "none";
    }, 2000);
  }
}

// شروع برنامه
document.addEventListener("DOMContentLoaded", () => {
  new AdvancedSafe();
});
</script>

</body>
</html>
